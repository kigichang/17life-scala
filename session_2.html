<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>session_2</title>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
</head>
<body>
<h1 id="toc_0">基本語法與 Data Type</h1>

<h2 id="toc_1">前言</h2>

<ul>
<li>Scala 的 <code>Tab</code> 是<strong>兩個</strong>空隔，與 Java 預設四個不同</li>
<li>Scala 已經沒有 <code>break</code> 與 <code>continue</code> 關鍵字可用</li>
<li>Scala 還保有 <code>return</code> 但不建議使用</li>
<li>Scala 還保有 <code>throw</code> Exception，但不建議使用。建議 refactor 成 Option or Either；IO相關可例外。</li>
<li>Scala 依然可以用 <code>try</code>-<code>catch</code>-<code>finally</code>。</li>
</ul>

<h2 id="toc_2">變數宣告方式</h2>

<p>變數的宣告方式如下：</p>

<pre><code>var 變數名稱: 資料型別 = 值
val 變數名稱: 資料型別 = 值</code></pre>

<p>ex:</p>

<pre><code>val a: Int = 10
var b: Double = 20.0
</code></pre>

<p>其中，資料型別可以省略，如下：</p>

<pre><code>val a = 10
var b = 20.0</code></pre>

<p><code>val</code> 等同在 java 使用 <code>final</code>。</p>

<p><code>var</code> 則如同 java 一般的宣告。</p>

<p>scala 鼓勵儘量使用 <code>val</code>。 </p>

<p>使用 <code>var</code> 宣告時，可以使用 <code>_</code> (萬用字元) 當預設值，此時 scala 會依型別，給予預設值。<code>val</code> 則不可用 <code>_</code>。</p>

<pre><code>var a: Int = _ /* a 會是 0 */

class Test
var b: Test = _ /* b 會是 null */</code></pre>

<h2 id="toc_3">Java Primitive Type</h2>

<p>Java primitive type are</p>

<ul>
<li>byte</li>
<li>char</li>
<li>short</li>
<li>int</li>
<li>long</li>
<li>float</li>
<li>double</li>
<li>boolean</li>
</ul>

<p>以上這些在 Scala 是被轉成所謂的 <code>Value Class</code> 全都繼承自 <code>AnyVal</code>。</p>

<p>Scala 定義的 <code>Value Class</code> 有：</p>

<ul>
<li>Unit -&gt; ()</li>
<li>Byte -&gt; byte</li>
<li>Char -&gt; char</li>
<li>Short -&gt; short</li>
<li>Int -&gt; int</li>
<li>Long -&gt; long</li>
<li>Float -&gt; float</li>
<li>Double -&gt; double</li>
<li>Boolean -&gt; boolean</li>
</ul>

<p><strong>注意：省略型別時，整數值會預設是 <code>Int</code>，浮點數值會是 <code>Double</code>。</strong></p>

<h2 id="toc_4">String</h2>

<p>Scala 的 String <strong>等於</strong> Java 的 String。唯一要注意的是 <code>.equals</code>。在 Java 比對字串的內容時，要使用 <code>.equals</code> 不能使用 <code>==</code>。但在 Scala 則可以。</p>

<p><strong>In Java</strong></p>

<pre><code>String str = &quot;hello world!&quot;;
&quot;hello&quot;.equals(str);
</code></pre>

<p><strong>In Scala</strong></p>

<pre><code>val str = &quot;Hello world!&quot;
&quot;hello&quot; == str
</code></pre>

<h3 id="toc_5">Scala 的字串有兩個方便的功能，讓寫作程式更方便</h3>

<ul>
<li>String Interpolation：字串與變數結合，字串的開頭為<code>s</code>, 可使用 <code>$</code> 來將變數加入字串中，或者用 <code>${}</code>將 statement 加入。讓程式寫作更方便，可讀性也變高。</li>
</ul>

<pre><code>val a = 10
val b = 20

println(s&quot;$a + $b = ${a + b}&quot;)</code></pre>

<ul>
<li>Raw String Delimiter：在 Scala 中，可以使用 <code>&quot;&quot;&quot;</code>，不處理脫序字元，且可多行。這項功能在宣告正規表示式很好用。</li>
</ul>

<pre><code>/* Java 列印 \r\n */
System.out.println(&quot;\\r\\n&quot;);

/* Scala */
println(&quot;&quot;&quot;\r\n&quot;&quot;&quot;)

/* 多行字串 */
val a = &quot;&quot;&quot;abc
def
  ccc
eee
&quot;&quot;&quot;
println(a)

/* Scala Regex */
val a = &quot;&quot;&quot;\d+&quot;&quot;&quot;.r</code></pre>

<h2 id="toc_6">Option</h2>

<p><code>Option</code> 是用來取代 <code>null</code>。<code>Option</code> 有兩個 subclass：</p>

<ul>
<li>Some</li>
<li>None</li>
</ul>

<p>宣告時用 generic 方式，來指定回傳的型別。</p>

<p>從<code>Option</code> 取值前，先用 <code>isDefined</code> 來判斷是否是 <code>Some</code>，是的話，再用 <code>get</code> 來取值。</p>

<pre><code>def parseInt(str: String): Option[Int] = {
  try {
    Option(str.toInt)
  }
  catch {
    case ex: Exception =&gt; None
  }
}

val a = parseInt(&quot;abc&quot;)

if (a.isDefined) println(a.get) else println(&quot;None&quot;)
</code></pre>

<p>在使用 Functional Languge 方式時寫程式時，不會這樣子做。</p>

<h2 id="toc_7">Tuple</h2>

<p>Tuple 可以將兩種以上，不同型別的資料組合起來使用；可以把它當作更精簡的 Bean 來看。</p>

<p>宣告：</p>

<pre><code>val a: (Int, String) = (10, &quot;ABC&quot;)</code></pre>

<p>或省略型別</p>

<pre><code>val a = (10, &quot;ABC&quot;)</code></pre>

<p>取值使用時，從 <strong>_1</strong> 開始，指定第一個值。以此類推。</p>

<pre><code>val a = (10, &quot;ABC&quot;)

println(a._2)</code></pre>

<p><strong>Tuple 最多只可以用到 22 個參數。</strong></p>

<h2 id="toc_8">Function</h2>

<p>完整的 function 宣告如下：</p>

<pre><code>def 函數名稱(變數名稱: 型別, 變數名稱: 型別, ...): 回傳型別 = {
  函數內容
}

/* 等同 Java: 
boolean test(int a, int b) { 
    return a == b; 
} */
def test(a: Int, b: Int): Boolean = {
  a == b
}

/* 等同 Java: 
void test(int a) { 
    System.out.println(a); 
} */
def print(a: Int): Unit = {
  println(a)
}</code></pre>

<p><strong>函式的回傳值，是看函式的最後一個 statement 的回傳值決定</strong></p>

<p>簡潔的寫法：</p>

<ul>
<li>沒有回傳值時</li>
</ul>

<pre><code>原：
def test(a: Int): Unit = {

}

簡：
def test(a: Int) {

}</code></pre>

<ul>
<li>省略寫回傳值，依函式的最後一行來決定</li>
</ul>

<pre><code>原:
def test(a: Int): Int = {
  val b = a + 10
  b
}

簡：
def test(a: Int) = {
  val b = a + 10
  b
}</code></pre>

<ul>
<li>沒有傳入參數時，可以省略 <code>()</code>，呼叫時，也可以省略。</li>
</ul>

<pre><code>原：
def test(): Int = {
  val a  = 10
  a
}

簡：
def test: Int = {
  val a = 10
  a
}

再簡：
def test = {
  val a = 10
  a
}

呼叫時：
test</code></pre>

<ul>
<li>如果函式只有一行 statement，<code>{</code> 和 <code>}</code> 可省略</li>
</ul>

<pre><code>原：
class Bean {
  private var age: Int = 0
  
  def getAge(): Int = {
    age
  }
  
  def setAge(a: Int): Unit = {
    age = a
  }
}

簡：
class Bean {
  private var age = 0
  
  def getAge = age
  
  def setAge(a: Int) = age = a
  
}

使用：
val b = new Bean
b.setAge(10)
b.getAge</code></pre>

<h3 id="toc_9">Function 進階</h3>

<ul>
<li>傳入的參數，預設都是 <code>val</code>，也就是不能再修改值。</li>
</ul>

<pre><code>def test(a: Int) = {
  a = 10 /* error: reassignment to val */
}</code></pre>

<ul>
<li>Named Arguments：在呼叫函式時，可以加入函式宣告的參數名稱，尤其是當函式的參數很多時，來增加可讀性；有指定參數的名稱時，就不一定要依照函式參數的順序傳入。</li>
</ul>

<pre><code>def test(a: Int, b: Int) = a + b

/* a,b 的順序就可互換 */
test(b = 10, a = 30)</code></pre>

<ul>
<li>Default Parameter Value：宣告函式時，可以給定參數預設值，當呼叫時，沒有傳入值時，就會使用此預設值。這項功能，常見於動態語言, ex: PHP。在設計程式，或者做 refactor 時，可利用這項特性，來增強相容性。</li>
</ul>

<pre><code>def test(a: Int, b: Int = 0) = a + b

test(10) /* b 會用 0 傳入 */

test(10, 20)</code></pre>

<p>refactor 案例：</p>

<pre><code>原始：
def test(a: Int): Int = a + 10</code></pre>

<p>後來希望可以控制 10 這個值，函式改寫成：</p>

<pre><code>def test(a: Int, b:Int) = a + b</code></pre>

<p>但已經存在的程式碼，太多地方使用，不想去更動它，所以可以寫成：</p>

<pre><code>def test(a: Int, b: Int = 10) = a + b</code></pre>

<p>Java 也行。但要多一個函式的宣告：</p>

<pre><code>原：

int test(int a) {
    return a + 10;
}

改：

int test(int a, int b) {
    return a + b;
}

int test(int a) {
    return test(a, 10);
}</code></pre>

<p><strong>有預設值的參數，不一定是要放在最後，但建議放在最後。目前我遇到有設計這項功能的程式語言，都會限定要放在最後。</strong></p>

<pre><code>/* 沒有放在最後的話，就要給定參數名稱 */
def test(a: Int, b: Int = 0, c: Int) = a + b + c

test(10, 20) /* error: not enough arguments for method test */

test(a = 10, c = 20)</code></pre>

<ul>
<li>Repeapted arguments: 可以宣告不定個數的參數的函式，並且可以使用 Array 或 List 傳入。</li>
</ul>

<pre><code>def test(args: String*) {
  args.foreach { println }
}

test(&quot;1&quot;, &quot;2&quot;)

test(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;)

val args = Array(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;)
test(args: _*)

val lst = List(&quot;a&quot;, &quot;1&quot;, &quot;b&quot;, &quot;2&quot;)
test(lst: _*)</code></pre>

<h2 id="toc_10">IF - ELSE IF - ELSE</h2>

<p>在 Scala 拿掉了 Java 的三元運算子 <code>?:</code> (ex: w = x ? y : z)；需改用 <code>if else</code></p>

<pre><code>val w = if (x) y else z</code></pre>

<p>也從這個例子中，Scala 在 <code>if - else</code> 的設計，是可以回傳值，在程式寫作時，可以多利用，ex:</p>

<pre><code>/* Java */
int a = 0;

if (xx)
  a = 10;
else if (yy)
  a = 20;
else
  a = 30;

或者
int a = xx ? 10 : (yy ? 20 : 30);
 

/* Scala */
val a = if (xx) 10 else if (yy) 20 else 30</code></pre>

<h2 id="toc_11">While Loop</h2>

<p><code>while</code> 的使用方式，跟 java 一樣</p>

<pre><code>def gcdLoop(x: Long, y: Long): Long = {
  var a = x
  var b = y
  while (a != 0) {
    val temp = a
    a = b%a
    b = temp
  }
  b 
}

var line = &quot;&quot;
do {
  line = readLine()
  println(&quot;Read: &quot;+ line)
} while (line != &quot;&quot;)</code></pre>

<h2 id="toc_12">For Loop</h2>

<p>Scala 的 <code>for</code> 語法，跟 Java 的 <code>for</code> 用在 <code>Iterable</code> 很像。</p>

<pre><code>/* 列印 1 ~ 9 */
for (i &lt;- 1 to 9)
  println(i)

for (i &lt;- 1 until 10) {
  println(i)
}

/* 九九乘法 */
for (i &lt;- 1 to 9) {
  for (j &lt;- 1 to 9)
    println(s&quot;$i x $j = ${i + j}&quot;)
}</code></pre>

<p>可以在 <code>for</code> 加 <code>if</code> 判斷，多個 <code>if</code> 時，是用 <code>and</code> 來判斷</p>

<pre><code>/* 列印 1 ~ 100 的偶數 */
for (i &lt;- 1 to 100 if i % 2 == 0)
  println(i)
  
/* 多個判斷 */
for (i &lt;- 1 to 100
     if i % 2 == 0
     if i % 5 == 0
) println(i)</code></pre>

<p>也可以將 nested for 縮成一個 for。使用時，要用 <code>;</code> 來區分 nested for</p>

<pre><code>/* 九九乘法 */
for (i &lt;- 1 to 9;
     j &lt;- 1 to 9
) println(s&quot;$i x $j = ${i * j}&quot;)</code></pre>

<p>使用 <code>for yield</code> 組出 collection</p>

<pre><code>val a = for (i &lt;- 1 to 9) yield i

val b = for (i &lt;- 1 to 9) yield {
  if (i % 2 == 0) i 
  else 0
}
/* 可以把 else 0 拿掉試看看 */</code></pre>

<p>Scala 的 <code>for</code> 雖然語法上跟 Java 很像，但底層的實作卻是大不相同。 Scala 的 <code>for</code> 主要是依循 Functional Language 的 <strong>Monads</strong> 模型做出來的。因此在使用 <code>for yield</code> 時，要去注意回傳 collection 的型別是什麼。</p>

<p><strong>當轉換到 Functional Language 的思維時，其實 <code>for</code> 就會很少使用。都會直接用 monads 的模型在實作。</strong></p>

<h2 id="toc_13">MATHCH CASE</h2>

<p><code>match case</code> 是 Scala 最重要的功能之一，使用的概念與 Java 的<code>switch case</code> 類似，但有更強大的功能。</p>

<p>由於 Scala 拿掉了 <code>break</code>，所以在每個 <code>case</code> 執行完後，會直接離開 <code>match</code> block。這個與 Java <code>switch case</code> 有很大的差別；在 Java 的 <code>case</code> 如果沒有下 <code>break</code>，會往下一個 <code>case</code> 繼續執行。</p>

<p>Scala 的 default case 的寫法是： <code>case _</code>，使用萬用字元 <code>_</code> 當 default case。</p>

<pre><code>val a = 10

a match {
  case 1 =&gt;
    println(1)  
  case 2 =&gt;
    println(2)
  case _ =&gt;
    println(&quot;other&quot;)
}

val b = &quot;abc&quot;

b match {
  case &quot;def&quot; =&gt;
    println(&quot;DEF&quot;)
  
  case &quot;abc&quot; =&gt;
    println(&quot;ABC&quot;)
    
  case _ =&gt;
    println(b)
}</code></pre>

<p>進階用法：</p>

<ul>
<li>case 加入型別及 <code>if</code> 的判斷</li>
</ul>

<pre><code>val a = 10

a match {
  case x if (x % 2 == 0) =&gt;
    println(&quot;event&quot;)
  case _ =&gt;
    println(&quot;odd&quot;)
}</code></pre>

<ul>
<li><code>match case</code> 可以回傳值</li>
</ul>

<pre><code>val a = 99

val isEvent = a match {
  case x if (a % 2 == 0) =&gt; true
  case _ =&gt; false
}</code></pre>

<p>在 Scala 使用 <code>match case</code> 時，雖然不強制一定要給 default case，但還是
養成好習慣，寫入 default case 要做什麼處理，當然也可以不做任何事情。</p>

<p>Scala 如果比對不到時，會出現 Runtime Error。</p>

<pre><code>val a = 5

a match {
  case a &lt; 5 =&gt; 
    println(&quot;a &lt; 5&quot;)
    
  case _ =&gt; /* 不做任何處理 */
}</code></pre>

<p><strong>不同的程式語言對於 match(switch) case 設計不盡相同，像 C++, Java 需要下 break 才會離開 switch block。Scala 與 Apple Swift 則不用。</strong></p>

<p><strong>推薦各位學 Scala 還有一項優點，就是熟 Scala 後，想再去學 Apple Swift 會非常快。Swift 的語法與設計概念，有很多與 Scala 雷同，而且比 Scala 更好用。</strong></p>

<h2 id="toc_14">TRY - CATCH - FINALLY</h2>

<p>scala 還保留 <code>try</code>，<code>catch</code>，<code>finally</code>，使用觀念與注意事項與 Java相同。</p>

<ul>
<li><code>finally</code> 是最後一定會被執行的區塊，<strong>千萬不要</strong>在此用 <code>return</code> 回傳值。<strong>切記：Scala 禁用 <code>return</code>。</strong></li>
<li><code>catch</code> 的語法，有點像 <code>match case</code>，變成 <code>catch case</code>。</li>
<li>與 Java 不同的地方，就是 <code>try - catch</code> 可以回傳值</li>
</ul>

<p>語法示意：</p>

<pre><code>try {
  .....
}
catch {
  case ex: IOException =&gt;
    ...
  
  case ex: SQLException =&gt;
    ...
    
  case ex: Exception =&gt;
    ...
}
finally {
  ....
}</code></pre>

<p>ex: </p>

<pre><code>/* 注意 try catch 是可以回傳值的 */
def parseInt(a: String) = {
  try {
    Option(a.toInt)
  }
  catch {
    case ex: Exception =&gt; None
  }
  finally {
    println(&quot;end&quot;)
  }
}</code></pre>

<p><strong>再次提醒，不論 Java 或 Scala 都千萬不要在 <code>finally</code> 用 <code>return</code>。</strong></p>

<pre><code>def f: Int = try { return 1 } finally { return 2 }
def g: Int = try { 1 } finally { 2 }

f /* return 2 */
g /* return 1 */</code></pre>

<script type="text/x-mathjax-config">
if (typeof MathJaxListener !== 'undefined') {
  MathJax.Hub.Register.StartupHook('End', function () {
    MathJaxListener.invokeCallbackForKey_('End');
  });
}
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
