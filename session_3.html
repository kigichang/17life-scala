<!DOCTYPE html><html>

<head>
<meta charset="utf-8">
<title>session_3</title>
<style type="text/css">
body {
  font-family: Helvetica, arial, sans-serif;
  font-size: 14px;
  line-height: 1.6;
  padding-top: 10px;
  padding-bottom: 10px;
  background-color: white;
  padding: 30px; }

body > *:first-child {
  margin-top: 0 !important; }
body > *:last-child {
  margin-bottom: 0 !important; }

a {
  color: #4183C4; }
a.absent {
  color: #cc0000; }
a.anchor {
  display: block;
  padding-left: 30px;
  margin-left: -30px;
  cursor: pointer;
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0; }

h1, h2, h3, h4, h5, h6 {
  margin: 20px 0 10px;
  padding: 0;
  font-weight: bold;
  -webkit-font-smoothing: antialiased;
  cursor: text;
  position: relative; }

h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor {
  background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA09pVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoMTMuMCAyMDEyMDMwNS5tLjQxNSAyMDEyLzAzLzA1OjIxOjAwOjAwKSAgKE1hY2ludG9zaCkiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OUM2NjlDQjI4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OUM2NjlDQjM4ODBGMTFFMTg1ODlEODNERDJBRjUwQTQiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QzY2OUNCMDg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo5QzY2OUNCMTg4MEYxMUUxODU4OUQ4M0REMkFGNTBBNCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PsQhXeAAAABfSURBVHjaYvz//z8DJYCRUgMYQAbAMBQIAvEqkBQWXI6sHqwHiwG70TTBxGaiWwjCTGgOUgJiF1J8wMRAIUA34B4Q76HUBelAfJYSA0CuMIEaRP8wGIkGMA54bgQIMACAmkXJi0hKJQAAAABJRU5ErkJggg==) no-repeat 10px center;
  text-decoration: none; }

h1 tt, h1 code {
  font-size: inherit; }

h2 tt, h2 code {
  font-size: inherit; }

h3 tt, h3 code {
  font-size: inherit; }

h4 tt, h4 code {
  font-size: inherit; }

h5 tt, h5 code {
  font-size: inherit; }

h6 tt, h6 code {
  font-size: inherit; }

h1 {
  font-size: 28px;
  color: black; }

h2 {
  font-size: 24px;
  border-bottom: 1px solid #cccccc;
  color: black; }

h3 {
  font-size: 18px; }

h4 {
  font-size: 16px; }

h5 {
  font-size: 14px; }

h6 {
  color: #777777;
  font-size: 14px; }

p, blockquote, ul, ol, dl, li, table, pre {
  margin: 15px 0; }

hr {
  background: transparent url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAECAYAAACtBE5DAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6OENDRjNBN0E2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6OENDRjNBN0I2NTZBMTFFMEI3QjRBODM4NzJDMjlGNDgiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4Q0NGM0E3ODY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDo4Q0NGM0E3OTY1NkExMUUwQjdCNEE4Mzg3MkMyOUY0OCIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqqezsUAAAAfSURBVHjaYmRABcYwBiM2QSA4y4hNEKYDQxAEAAIMAHNGAzhkPOlYAAAAAElFTkSuQmCC) repeat-x 0 0;
  border: 0 none;
  color: #cccccc;
  height: 4px;
  padding: 0;
}

body > h2:first-child {
  margin-top: 0;
  padding-top: 0; }
body > h1:first-child {
  margin-top: 0;
  padding-top: 0; }
  body > h1:first-child + h2 {
    margin-top: 0;
    padding-top: 0; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child {
  margin-top: 0;
  padding-top: 0; }

a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 {
  margin-top: 0;
  padding-top: 0; }

h1 p, h2 p, h3 p, h4 p, h5 p, h6 p {
  margin-top: 0; }

li p.first {
  display: inline-block; }
li {
  margin: 0; }
ul, ol {
  padding-left: 30px; }

ul :first-child, ol :first-child {
  margin-top: 0; }

dl {
  padding: 0; }
  dl dt {
    font-size: 14px;
    font-weight: bold;
    font-style: italic;
    padding: 0;
    margin: 15px 0 5px; }
    dl dt:first-child {
      padding: 0; }
    dl dt > :first-child {
      margin-top: 0; }
    dl dt > :last-child {
      margin-bottom: 0; }
  dl dd {
    margin: 0 0 15px;
    padding: 0 15px; }
    dl dd > :first-child {
      margin-top: 0; }
    dl dd > :last-child {
      margin-bottom: 0; }

blockquote {
  border-left: 4px solid #dddddd;
  padding: 0 15px;
  color: #777777; }
  blockquote > :first-child {
    margin-top: 0; }
  blockquote > :last-child {
    margin-bottom: 0; }

table {
  padding: 0;border-collapse: collapse; }
  table tr {
    border-top: 1px solid #cccccc;
    background-color: white;
    margin: 0;
    padding: 0; }
    table tr:nth-child(2n) {
      background-color: #f8f8f8; }
    table tr th {
      font-weight: bold;
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr td {
      border: 1px solid #cccccc;
      margin: 0;
      padding: 6px 13px; }
    table tr th :first-child, table tr td :first-child {
      margin-top: 0; }
    table tr th :last-child, table tr td :last-child {
      margin-bottom: 0; }

img {
  max-width: 100%; }

span.frame {
  display: block;
  overflow: hidden; }
  span.frame > span {
    border: 1px solid #dddddd;
    display: block;
    float: left;
    overflow: hidden;
    margin: 13px 0 0;
    padding: 7px;
    width: auto; }
  span.frame span img {
    display: block;
    float: left; }
  span.frame span span {
    clear: both;
    color: #333333;
    display: block;
    padding: 5px 0 0; }
span.align-center {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-center > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: center; }
  span.align-center span img {
    margin: 0 auto;
    text-align: center; }
span.align-right {
  display: block;
  overflow: hidden;
  clear: both; }
  span.align-right > span {
    display: block;
    overflow: hidden;
    margin: 13px 0 0;
    text-align: right; }
  span.align-right span img {
    margin: 0;
    text-align: right; }
span.float-left {
  display: block;
  margin-right: 13px;
  overflow: hidden;
  float: left; }
  span.float-left span {
    margin: 13px 0 0; }
span.float-right {
  display: block;
  margin-left: 13px;
  overflow: hidden;
  float: right; }
  span.float-right > span {
    display: block;
    overflow: hidden;
    margin: 13px auto 0;
    text-align: right; }

code, tt {
  margin: 0 2px;
  padding: 0 5px;
  white-space: nowrap;
  border: 1px solid #eaeaea;
  background-color: #f8f8f8;
  border-radius: 3px; }

pre code {
  margin: 0;
  padding: 0;
  white-space: pre;
  border: none;
  background: transparent; }

.highlight pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }

pre {
  background-color: #f8f8f8;
  border: 1px solid #cccccc;
  font-size: 13px;
  line-height: 19px;
  overflow: auto;
  padding: 6px 10px;
  border-radius: 3px; }
  pre code, pre tt {
    background-color: transparent;
    border: none; }

sup {
    font-size: 0.83em;
    vertical-align: super;
    line-height: 0;
}
* {
	-webkit-print-color-adjust: exact;
}
@media screen and (min-width: 914px) {
    body {
        width: 854px;
        margin:0 auto;
    }
}
@media print {
	table, pre {
		page-break-inside: avoid;
	}
	pre {
		word-wrap: break-word;
	}
}
</style>
</head>
<body>
<h1 id="toc_0">Scala 的物件導向</h1>

<h2 id="toc_1">OOP</h2>

<ul>
<li>封裝 (Encapsulation)</li>
<li>繼承 (Inheritance)</li>
<li>多型 (Polymorphism)</li>
</ul>

<h2 id="toc_2">Class</h2>

<h3 id="toc_3">宣告方式</h3>

<pre><code>class 名稱 [extends Class or Trait 名稱] [with Trait 名稱] {
  
}</code></pre>

<p>eg:</p>

<pre><code>scala&gt; class Test
defined class Test

scala&gt; class Test2 extends Test 
defined class Test2
</code></pre>

<pre><code>class 名稱([存取等級] [val or var] 變數名稱: 型別) [extends Class or Trait 名稱] [with Trait 名稱] [with Trait 名稱] {
  def this() = this(...)
}
</code></pre>

<p>eg:</p>

<pre><code>scala&gt; class Test(a: Int, b: Double) {
     |   println(s&quot;${a}, ${b}&quot;)
     | }
defined class Test

scala&gt; class Test2(a: Int) extends Test(a, 10.0) {        
     | def this() = this(20)
     | }
defined class Test2
</code></pre>

<p><strong>Java Bean Like</strong></p>

<pre><code>scala&gt; class Test(var name: String, var age: Int, var address: String)

scala&gt; val a = new Test(&quot;abc&quot;, 10, &quot;aaaaaa&quot;)
a: Test = Test@74d1dd7e

scala&gt; a.name
res0: String = abc

scala&gt; a.age
res1: Int = 10

scala&gt; a.address
res2: String = aaaaaa

scala&gt; a.name = &quot;abcdef&quot;
a.name: String = abcdef

scala&gt; a.age = 20
a.age: Int = 20

scala&gt; a.address = &quot;bbbbbb&quot;
a.address: String = bbbbbb
</code></pre>

<h3 id="toc_4">Primary and Auxiliary Contructors</h3>

<p>在 Scala 及 Swift 中，Constructor 有主、副之分。</p>

<p>eg:</p>

<pre><code>scala&gt; class Test(a: Int, b: Double) {
     |   println(s&quot;${a}, ${b}&quot;)
     |   
     |   def this() = this(10, 20.0)
     | }
defined class Test
</code></pre>

<p><strong>Primary Constructor</strong> 是 </p>

<pre><code>class Test(a: Int, b: Double) { 
    println(s&quot;${a}, ${b}&quot;)
}
</code></pre>

<p><strong>Auxiliary Constructor</strong> 是</p>

<pre><code>    def this() = this(10, 20.0)</code></pre>

<p>轉換成 Java 語法來看：</p>

<pre><code>class Test {
    public Test(int a, double b) {
        System.out.println(&quot;&quot; + a + &quot;, &quot; + b)
    }
    
    public Test() {
        this(10, 20.0);
    }
}
</code></pre>

<ul>
<li><code>public Test(int a, double b)</code> 是 <strong>Primary Constructor</strong></li>
<li><code>public Test()</code> 是 <strong>Auxiliary Constructor</strong></li>
</ul>

<h3 id="toc_5">Override</h3>

<p>當子類別要改寫父類別的函式時，在宣告函式時，一定要用 <code>override</code>，否則會報錯。 </p>

<p>eg:</p>

<pre><code>scala&gt; class Test {
     | def echo = &quot;Echo&quot;
     | }
defined class Test
</code></pre>

<p><strong>沒用 <code>override</code> 會報錯</strong></p>

<pre><code>scala&gt; class Test2 extends Test {
     | def echo = &quot;Echo2&quot;
     | }
&lt;console&gt;:9: error: overriding method echo in class Test of type =&gt; String;
 method echo needs `override&#39; modifier
       def echo = &quot;Echo2&quot;</code></pre>

<p><strong>正解</strong></p>

<pre><code>scala&gt; class Test2 extends Test {
     | override def echo = &quot;Echo2&quot;
     | }</code></pre>

<h3 id="toc_6">注意事項</h3>

<p>宣告 class 時，如果 primary constructor 的變數，沒有加 <code>val</code> or <code>var</code> 則不會自動變成 member data。</p>

<pre><code>scala&gt; class Test(a: Int)
defined class Test

scala&gt; val t = new Test(10)
t: Test = Test@7c8c0c57

scala&gt; t.a
&lt;console&gt;:10: error: value a is not a member of Test
              t.a</code></pre>

<h2 id="toc_7">Object</h2>

<p><strong>Scala 的 <code>object</code> 等同於 Java Singleton</strong></p>

<p>Scala 允許 <code>object</code> 的名稱與 <code>class</code> 相同，且可以放在同一份 source code 中。這類的 <code>object</code> 稱作 <strong>Companion Object</strong>。</p>

<p>類比 Java 的實作，就是把 <strong><code>static</code></strong> 相關的變數及函式(Class member data and function)，放到 <code>object</code> 中。</p>

<p>在 <code>object</code> 中，就不用 <strong><code>static</code></strong> 這個關鍵字。</p>

<p>eg:</p>

<pre><code>scala&gt; object Test {
     | def myTest = println(&quot;abc&quot;)
     | }
defined object Test

scala&gt; Test.myTest
abc
</code></pre>

<p>在 Java 要寫一個應用程式 (Application)，需要在一個 <code>public class</code> 內，宣告一個 <code>public static void main (String[] args)</code> 函式。</p>

<p>eg:</p>

<pre><code>public class Test {
    public static void main(String[] args) {
    }
}</code></pre>

<p>改用 Scala 後，則在一個 <code>object</code> 宣告 <code>def main(args: Array[String])</code></p>

<p>eg:</p>

<pre><code>object Test {
  def main(args: Array[String]) {
  }
}</code></pre>

<h2 id="toc_8">Trait</h2>

<p>Scala 的 <code>trait</code> 可以類比成 Java 的 <code>interface</code>。一個 <code>class</code> 可以繼承(實作)多個 <code>trait</code>。在使用時，如果 <code>class</code> 沒有繼承其他的 <code>class</code> or <code>trait</code> 時，則用 <code>extends</code>，否則用 <code>with</code></p>

<p>eg:</p>

<pre><code>scala&gt; trait MyTrait
defined trait MyTrait

scala&gt; class Test
defined class Test

scala&gt; class Test2 extends Test with MyTrait
defined class Test2

scala&gt; class Test3 extends MyTrait
defined class Test3
</code></pre>

<p>在 Java 8 以前，<code>interface</code> 沒有 default function 的功能，也因此無法在 <code>interface</code> 內實作函式。</p>

<p>Scala 的 <code>trait</code> 則打破這個限制，允許在 <code>trait</code> 內有變數、函式的實作。也因此更起達到多重繼承的效果。</p>

<p>eg: Trait 內含變數與實作函式</p>

<pre><code>scala&gt; trait MyTrait {
     |   val a = 10
     |   def test: Int
     |   def sum(x: Int, y: Int) = x + y + a
     | }
defined trait MyTrait

scala&gt; class Test extends MyTrait {
     |   def test = a + 1000
     | }
defined class Test

scala&gt; val t = new Test
t: Test = Test@597b40a8

scala&gt; t.test
res0: Int = 1010

scala&gt; t.sum(t.a, 10)
res2: Int = 30</code></pre>

<p>eg: 多個 Trait；有多重繼承效果</p>

<pre><code>scala&gt; trait MyTrait1 {
     |   val a = 10
     |   def test1: Int
     | }
defined trait MyTrait1

scala&gt; trait MyTrait2 {
     |   val b = 20
     |   def test2: Int
     | }
defined trait MyTrait2

scala&gt; trait MyTrait3 {
     |   val c = 30
     |   def test3: Int
     | }
defined trait MyTrait3

scala&gt; class Test extends MyTrait1 with MyTrait2 with MyTrait3 {
     |   def test1 = b + 1
     |   def test2 = c + 2
     |   def test3 = a + 3
     | }
defined class Test

scala&gt; val t = new Test
t: Test = Test@37f7bfb6

scala&gt; t.test1
res0: Int = 21

scala&gt; t.test2
res1: Int = 32

scala&gt; t.test3
res2: Int = 13</code></pre>

<p>object 也可以繼承(實作) trait</p>

<pre><code>scala&gt; trait MyTrait
defined trait MyTrait

scala&gt; object Test extends MyTrait
defined object Test</code></pre>

<h2 id="toc_9">Scala 增強的功能</h2>

<h3 id="toc_10">自定 Access Level</h3>

<p>Scala 允許自定 Access Level，因此在程式設計上會更有彈性，安全性也會更高。</p>

<p>使用方式：<code>modifier[this, class or package]</code>. eg: <code>private[Test]</code></p>

<p>eg: 變數只允許自己本身的 instance 使用。比 private 更嚴格。</p>

<pre><code>scala&gt; class TestPrivateThis {
     |   private[this] val a = 10
     | 
     |   def func(): Int = a + 10
     | 
     |   def func(that: TestPrivateThis): Int = a + that.a
     | }
&lt;console&gt;:12: error: value a is not a member of TestPrivateThis
         def func(that: TestPrivateThis): Int = a + that.a</code></pre>

<h3 id="toc_11">Operator Overloading</h3>

<p>在 Java 中，無法在 class 中，定義 <code>+</code>，<code>-</code>，<code>*</code>，<code>/</code> 這類四則運算。但在 Scala 則可以，這會讓程式碼更簡潔也更方便閱讀。</p>

<p>eg:</p>

<pre><code>class Rational(n: Int, d: Int) {

  require(d != 0)
  
  def this(n: Int) = this(n, 1)
  
  def gcd(a: Int, b: Int): Int = if (a == 0) b else gcd(b % a, a)
  
  val g = gcd(n, d)
  
  val numer = n / g
  
  val denom = d / g
  
  
  override def toString = if (denom != 1) s&quot;${numer} / ${denom}&quot; else s&quot;${numer}&quot;
  
  def +(that: Rational) = new Rational(numer * that.denom + denom * that.numer, denom * that.denom)
  
  def -(that: Rational) = new Rational(numer * that.denom - denom * that.numer, denom * that.denom)
  
  def *(that: Rational) = new Rational(numer * that.numer, denom * that.denom)
  
  def /(that: Rational) = new Rational(numer * that.denom, denom * that.numer)
  
}


object Rational {
  
  def main(args: Array[String]) {
   
    val r1 = new Rational(3, 7)
    val r2 = new Rational(5, 21)
    
    println(r1 * r2)
  }
}</code></pre>

<h3 id="toc_12">apply Function</h3>

<p>當在 class 宣告 <code>apply</code> 的函式後，使用時，可以省略函式的名稱。</p>

<p>eg:</p>

<pre><code>scala&gt; class Test {
     | def apply(a: Int, b: Int): Int = a + b
     | }
defined class Test

scala&gt; val t = new Test
t: Test = Test@300a2ae

scala&gt; val a = t(10, 20)
a: Int = 30
</code></pre>

<p>在上例中 <code>val a = t(10, 20)</code> 就是呼叫 <code>apply</code> 函式。<code>apply</code> 函式，在 scala collection 相關 class (HashMap, Array 等) 很常用到。</p>

<h4 id="toc_13">case class</h4>

<p>Scala 在宣告 <code>class</code> 時，可以使用 <code>case</code> 這個修飾詞，使用後，在產生 instance (以後就不用 object 這個字眼，以免跟 scala 的 <code>object</code> 混餚) 時，可以省略 <code>new</code>；如果 primary contructor 有參數時，會自動將參數轉成 <strong>val</strong> 型態的 member data。</p>

<p>eg:</p>

<pre><code>scala&gt; case class Test(name: String, age: Int)
defined class Test

scala&gt; val t = Test(&quot;abc&quot;, 20)
t: Test = Test(abc,20)

scala&gt; t.name 
res0: String = abc

scala&gt; t.age
res1: Int = 20

scala&gt; t.name = &quot;abcdef&quot;
&lt;console&gt;:10: error: reassignment to val
       t.name = &quot;abcdef&quot;</code></pre>

<p><code>case class</code> 與 <code>apply</code>, <code>object</code>, pattern match (<code>match</code> - <code>case</code>) 有密不可分的關係，在第二階段會再詳述。</p>

<h2 id="toc_14">Enumeration</h2>

<h3 id="toc_15">基本用法</h3>

<h4 id="toc_16">Java 版本</h4>

<pre><code>public enum DirectionJava {
    TOP, DOWN, LEFT, RIGHT;
}</code></pre>

<p>在 Java 使用 <code>enum</code> 宣告即可。 </p>

<p>Java class 使用 <code>enum</code> 後會變成 final class，因此 enum 不能再繼承其他的 class (Java 是單一繼承)，也不能再被其他 class 繼承。</p>

<p><code>enum</code> 的 Constructor 設計成 <code>private</code>，所以之後也無法自行產生 instance，只能使用內定的值 (static 值) 或 null。</p>

<p>總結以上，各位不覺得 <code>enum</code> 就跟 signleton 很像嗎？！</p>

<h4 id="toc_17">Scala 版本</h4>

<pre><code>object DirectionScala extends Enumeration {
  val Top, Down, Left, Right = Value
}</code></pre>

<p>Scala 的 Enumation 歷史比 Java 早，因此實作語法上，與 Java 不太相同，但觀念差不多。</p>

<p>Scala 的 Enumeration 跟 Java 的很類似，但 Scala 的內定值型別是 Enumeration.Value。 </p>

<p>Enumeration.Value 本身是個 abstract class。在 Enumeration 內有一個實作的 class: <code>protected class Val</code>，如果需要自定 Enumeration 時，就會需要繼承這個 class。</p>

<h3 id="toc_18">進階</h3>

<h4 id="toc_19">Java 版</h4>

<pre><code>public enum Planet {
    MERCURY (3.303e+23, 2.4397e6),
    VENUS   (4.869e+24, 6.0518e6),
    EARTH   (5.976e+24, 6.37814e6),
    MARS    (6.421e+23, 3.3972e6),
    JUPITER (1.9e+27,   7.1492e7),
    SATURN  (5.688e+26, 6.0268e7),
    URANUS  (8.686e+25, 2.5559e7),
    NEPTUNE (1.024e+26, 2.4746e7);

    private final double mass;   // in kilograms
    private final double radius; // in meters
    
    Planet(double mass, double radius) {
        this.mass = mass;
        this.radius = radius;
    }
    
    private double mass() { return mass; }
    private double radius() { return radius; }

    // universal gravitational constant  (m3 kg-1 s-2)
    public static final double G = 6.67300E-11;

    double surfaceGravity() {
        return G * mass / (radius * radius);
    }
    
    double surfaceWeight(double otherMass) {
        return otherMass * surfaceGravity();
    }
    
    public static void main(String[] args) {
        if (args.length != 1) {
            System.err.println(&quot;Usage: java Planet &lt;earth_weight&gt;&quot;);
            System.exit(-1);
        }
        double earthWeight = Double.parseDouble(args[0]);
        double mass = earthWeight/EARTH.surfaceGravity();
        for (Planet p : Planet.values())
           System.out.printf(&quot;Your weight on %s is %f%n&quot;,
                             p, p.surfaceWeight(mass));
    }
}</code></pre>

<h4 id="toc_20">Scala 版</h4>

<pre><code>object Planets extends Enumeration {

  val G: Double = 6.67300E-11

  final case class Planet private[Planets] (mass: Double, radius: Double) extends Val {
    def surfaceGravity(): Double = G * mass / (radius * radius)
    def surfaceWeight(otherMass: Double): Double = otherMass * surfaceGravity()
  }

  val Mercury = Planet(3.303e+23, 2.4397e6)
  val Venus = Planet(4.869e+24, 6.0518e6)
  val Earth = Planet(5.976e+24, 6.37814e6)
  val Mars = Planet(6.421e+23, 3.3972e6)
  val Jupiter = Planet(1.9e+27,   7.1492e7)
  val Saturn = Planet(5.688e+26, 6.0268e7)
  val Uranus = Planet(8.686e+25, 2.5559e7)
  val Neptune = Planet(1.024e+26, 2.4746e7)


  def main(args: Array[String]) {
    require(args.length == 1, &quot;Usage: java Planet &lt;earth_weight&gt;&quot;)

    val earthWeight = args(0).toDouble  
    val mass = earthWeight / Planets.Earth.surfaceGravity

    Planets.values.foreach(p =&gt; println(&quot;Your weight on %s is %f%n&quot;.format(p, p.asInstanceOf[Planet].surfaceWeight(mass))))
  }

}
</code></pre>

<h2 id="toc_21">附錄</h2>

<h3 id="toc_22">activator</h3>

<h4 id="toc_23">產生專案</h4>

<p>完整的指令： <code>activator new [project-name] [template-name]</code></p>

<p>一般的步驟：</p>

<ul>
<li>執行：<code>activator new 專案名稱</code></li>
<li>選擇專案的 template</li>
</ul>

<pre><code>Fetching the latest list of templates...

Browse the list of templates: http://typesafe.com/activator/templates
Choose from these featured templates or enter a template name:
  1) minimal-akka-java-seed
  2) minimal-akka-scala-seed
  3) minimal-java
  4) minimal-scala
  5) play-java
  6) play-scala
(hit tab to see a list of all templates)
</code></pre>

<p>1), 2) 是 akka 專案</p>

<p>3), 4) 是一般應用程式專案</p>

<p>5), 6) 是寫 Play Framework (web) 專案</p>

<ul>
<li>在專案目錄下的 <code>project</code> 目錄，加入 <code>plugins.sbt</code> 檔案，內容如下：</li>
</ul>

<pre><code>addSbtPlugin(&quot;com.typesafe.sbteclipse&quot; % &quot;sbteclipse-plugin&quot; % &quot;4.0.0&quot;)

addSbtPlugin(&quot;com.eed3si9n&quot; % &quot;sbt-assembly&quot; % &quot;0.13.0&quot;)</code></pre>

<p><strong>注意：兩行中間，一定要空一行</strong></p>

<ul>
<li>執行：<code>activator eclipse</code> 產生 eclipse 可以匯入的專案格式</li>
<li>使用 eclipse 匯入 (General -&gt; Existing Projects into Workspace)</li>
</ul>

<h4 id="toc_24">命令列模式</h4>

<p>在專案的目錄下，執行 <code>activator</code>，會進入 Activator 的命令列模式。與 Maven 相同，有 <code>reload</code>, <code>update</code>,<code>clean</code>, <code>compile</code>, <code>package</code>, <code>test</code> 等指定；如果有加入 sbteclipse-plugin，也可在這使用 <code>eclipse</code>。</p>

<ul>
<li>reload: 重新載入 SBT 設定</li>
<li>update: 更新相關的 dependency library</li>
<li>clean: 將先前產生的 *.class, *.jar 清除</li>
<li>compile: 編譯專案</li>
<li>package: 打包專案</li>
<li>test: 執行 Unit Test</li>
</ul>

<h4 id="toc_25">修改 Dependency</h4>

<p>與 Maven 相同， Activator 可以管理專案的 dependency。修改專案目錄下的 <code>build.sbt</code>。</p>

<p>eg:</p>

<pre><code>libraryDependencies += &quot;mysql&quot; % &quot;mysql-connector-java&quot; % &quot;5.1.34&quot;

libraryDependencies += &quot;org.apache.commons&quot; % &quot;commons-lang3&quot; % &quot;3.3.2&quot;

libraryDependencies += &quot;org.apache.commons&quot; % &quot;commons-email&quot; % &quot;1.3.3&quot;</code></pre>

<p><strong>注意：每行中間，一定要空一行</strong></p>

<p>修改完 dependency，請再執行 <code>activator eclipse</code> 重新產生 eclipse 的專案，在 eclipse IDE 再重新 reload 一次，即可生效。</p>

<script type="text/x-mathjax-config">
if (typeof MathJaxListener !== 'undefined') {
  MathJax.Hub.Register.StartupHook('End', function () {
    MathJaxListener.invokeCallbackForKey_('End');
  });
}
</script>
<script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
</body>

</html>
